{% extends 'base.html.twig' %}
{% block stylesheets %}
    <title>Single Product</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="OneTech shop project">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="/styles/bootstrap4/bootstrap.min.css">
    <link href="/plugins/fontawesome-free-5.0.1/css/fontawesome-all.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" type="text/css" href="/plugins/OwlCarousel2-2.2.1/owl.carousel.css">
    <link rel="stylesheet" type="text/css" href="/plugins/OwlCarousel2-2.2.1/owl.theme.default.css">
    <link rel="stylesheet" type="text/css" href="/plugins/OwlCarousel2-2.2.1/animate.css">
    <link rel="stylesheet" type="text/css" href="/styles/product_styles.css">
    <link rel="stylesheet" type="text/css" href="/styles/product_responsive.css">
    <link href="https://fonts.googleapis.com/css?family=Orbitron&display=swap" rel="stylesheet">
{% endblock %}
{% block body %}
    <!-- Single Product -->

    <div class="single_product">
        <div class="container">

            <nav aria-label="breadcrumb">
                <ol class="breadcrumb" style="background-color: white">
                    {% for crumb in crumbs %}
                        <li class="breadcrumb-item"><a href="{{ path('category',{'slug': crumb.slug}) }}">{{ crumb.name }}</a></li>
                    {% endfor %}
                </ol>
            </nav>
            {% if admin == true %}
            <div class="row">
                <div class="col-5"></div>
                <div class="col-3"><b>Эту страницу видит только администратор</b></div>
            </div>
            {% endif %}
            <div class="row">
                <!-- Images -->
                <div class="col-lg-2 order-lg-1 order-2" style="height: 525px; overflow-y: auto" id="gallery">
                    <ul class="image_list">
                        {% for image in product.image %}
                            <li data-image="/images/{{ image.ImagePath }}"><img src="/images/{{ image.ImagePath }}" onerror="this.src='/no-image.png'"  alt=""></li>
                        {% endfor %}
                    </ul>
                </div>

                <div class="col-lg-5 order-lg-2 order-1">
                    <div class="image_selected"><img style="object-fit: contain" src=
                {% if product.image.get(0).ImagePath is defined %}
                     "/images/{{ product.image.get(0).ImagePath }}"
                {% else %}
                    "/no-image.png"
                {% endif %}
                alt="" onerror="this.src='/no-image.png'"></div>
                </div>

                <!-- Description -->
                <div class="col-lg-5 order-3">
                    <div class="product_description">
                        <div class="product_name">{{ product.name }}</div>
                        {% if product.wholesalePrice is not null and product.minimumWholesale is not null %}
                            <div>
                                Оптовая цена: {% if product.ProductValue is not null %}
                                {{ (product.wholesalePrice * product.ProductValue) }} грн / {{ product.wholesalePrice }} {{ product.currencyName }}
                            {% else %}
                                {{ product.wholesalePrice }} грн
                                {% endif %} - при заказе от {{ product.minimumWholesale }} штук
                            </div>
                        {% endif %}
                        <div></div>
                        <div class="order_info d-flex flex-row">
                            <form action="#">
                                <div class="clearfix" style="z-index: 1000;">
                                    <!-- Product Quantity -->
                                    <div class="product_quantity clearfix">
                                        <span class="text-dark" style="font-weight: 500;">Кол-во: </span>
                                        <input id="quantity_input" class="text-dark font-weight-bold offset-2" type="text" pattern="[0-9]*" value="1">
                                        <div class="quantity_buttons">
                                            <div id="quantity_inc_button" class="quantity_inc quantity_control"><i class="fas fa-chevron-up"></i></div>
                                            <div id="quantity_dec_button" class="quantity_dec quantity_control"><i class="fas fa-chevron-down"></i></div>
                                        </div>
                                    </div>
                                </div>
                                <div class="product_price">
                                    {% if product.ProductValue is not null %}
                                    {% if product.sale is not empty %}
                                        <s style="color: #787d76; font-size: medium">{{ (product.retailPrice * product.ProductValue) }} грн</s><br>
                                        {{ product.retailPrice * product.ProductValue - (product.retailPrice * product.ProductValue/100 * product.sale) }} грн
                                    {% else %}
                                        {{ (product.retailPrice * product.ProductValue) }} грн
                                    {% endif %}
                                </div>
                                {% else %}
                                {% if product.sale is not empty %}
                                    <s style="color: #787d76; font-size: medium">{{ (product.retailPrice) }} грн</s><br>
                                    {{ product.retailPrice - (product.retailPrice/100 * product.sale) }} грн
                                {% else %}
                                    {{ (product.retailPrice) }} грн
                                {% endif %}

                        </div>
                        {% endif %}
                        {% if product.ProductUnit is not null %}
                        / {{ product.ProductUnit }}
                        {% endif %}
                                <div class="button_container">
                                    {% if product.IsAvailable %}
                                        <button type="button" class="button cart_button add_to_basket " value="{{ product.slug }}">Купить <i class="fas fa-cart-plus"></i></button>
                                    {% else %}
                                        Нет в наличии
                                    {% endif %}
                                </div>

                            </form>
                        </div>
                    </div>
                </div>
            </div>
            <div style="width: 100vw" class="product_text">{{ product.description|raw }}</div>
            <table class="table">
                <thead>
                <tr>
                    <th scope="col">Характеристика</th>
                    <th scope="col">Значение</th>
                </tr>
                </thead>
                <tbody>
                {% if brand.name is not null %}
                <tr>
                    <td>Производитель</td>
                    <td>{{ brand.name }}</td>
                </tr>
                {% endif %}
                {% if brand.country is not null %}
                    <tr>
                        <td>Производитель</td>
                        <td>{{ brand.country }}</td>
                    </tr>
                {% endif %}
                {% for characteristic in specifications %}
                    <tr>
                        <td>{{ characteristic.name }}</td>
                        <td>{{ characteristic.value }} {% if characteristic.unit is not null %}( {{ characteristic.unit }} ){% endif %}</td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
{% endblock %}
{% block javascripts %}
    <script src="/js/jquery-3.3.1.min.js"></script>
    <script src="/styles/bootstrap4/popper.js"></script>
    <script src="/styles/bootstrap4/bootstrap.min.js"></script>
    <script src="/plugins/greensock/TweenMax.min.js"></script>
    <script src="/plugins/greensock/TimelineMax.min.js"></script>
    <script src="/plugins/scrollmagic/ScrollMagic.min.js"></script>
    <script src="/plugins/greensock/animation.gsap.min.js"></script>
    <script src="/plugins/greensock/ScrollToPlugin.min.js"></script>
    <script src="/plugins/OwlCarousel2-2.2.1/owl.carousel.js"></script>
    <script src="/plugins/easing/easing.js"></script>
    <script src="/js/product_custom.js"></script>
    <script src="/js/main.js"></script>

{% endblock %}